<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tamagotchi Unified with Items and Movement</title>
  <style>
    @font-face {
      font-family: "8bit";
      src: url("https://fonts.cdnfonts.com/s/18139/PressStart2P-Regular.woff") format("woff");
    }

    body {
      margin: 0;
      padding: 0;
      background: #0d1117;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
      font-family: "8bit", Arial, sans-serif;
    }

    .meters-container {
      width: 90%;
      max-width: 400px;
      margin-top: 10px;
    }

    .meter {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .meter-label {
      flex: 1;
      font-size: 12px;
      text-align: left;
    }

    .meter-bar {
      flex: 4;
      height: 20px;
      background: red;
      position: relative;
      border-radius: 5px;
      overflow: hidden;
    }

    .meter-fill {
      height: 100%;
      background: green;
      width: 100%;
      transition: width 0.2s ease-out;
    }

    canvas {
      background: #161b22;
      border: 2px solid #58a6ff;
      display: block;
      margin-top: 10px;
    }

    .controls-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 90%;
      max-width: 400px;
      margin-top: 20px;
    }

    .coins {
      flex: 1;
      text-align: center;
      font-size: 16px;
    }

    .controls {
      flex: 3;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 20px;
      border: 2px solid #58a6ff;
      background: #161b22;
      color: white;
      font-size: 1rem;
      font-family: "8bit", Arial, sans-serif;
      cursor: pointer;
      text-transform: uppercase;
      transition: background 0.2s, color 0.2s, border-color 0.2s;
      flex: 1;
      min-width: 100px;
    }

    button:hover {
      background: #58a6ff;
      color: black;
      border-color: #1f6feb;
    }

    .inventory {
      margin-top: 10px;
      width: 90%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .inventory-section {
      border: 2px solid #58a6ff;
      border-radius: 5px;
      padding: 10px;
      background: #161b22;
    }

    .inventory-section h3 {
      margin: 0 0 10px;
      font-size: 14px;
    }

    .inventory-section .inventory-meter {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .inventory-meter .inventory-fill {
      flex: 1;
      height: 10px;
      background: red;
      border-radius: 3px;
      overflow: hidden;
    }

    .inventory-meter .inventory-fill span {
      display: block;
      height: 100%;
      background: green;
      transition: width 0.2s ease-out;
    }
  </style>
</head>
<body>
  <div class="meters-container">
    <div class="meter">
      <div class="meter-label">Hunger</div>
      <div class="meter-bar"><div class="meter-fill" id="hungerFill"></div></div>
    </div>
    <div class="meter">
      <div class="meter-label">Happiness</div>
      <div class="meter-bar"><div class="meter-fill" id="happinessFill"></div></div>
    </div>
    <div class="meter">
      <div class="meter-label">Cleanliness</div>
      <div class="meter-bar"><div class="meter-fill" id="cleanlinessFill"></div></div>
    </div>
  </div>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div class="controls-container">
    <div class="coins" id="coinCount">Coins: 0</div>
    <div class="controls">
      <button id="feedBtn">Feed</button>
      <button id="playBtn">Play</button>
      <button id="cleanBtn">Clean</button>
    </div>
  </div>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const tamagotchi = {
      hunger: 100,
      happiness: 100,
      cleanliness: 100,
      x: canvas.width / 2,
      y: canvas.height / 2,
      dx: 2,
      dy: 2,
      coins: 0,
      alive: true
    };

    const spriteSize = 32;

    function drawTamagotchi() {
      const bounceOffset = Math.sin(Date.now() / 200) * 5;

      ctx.fillStyle = "yellow";
      ctx.beginPath();
      ctx.arc(
        tamagotchi.x + spriteSize / 2,
        tamagotchi.y + spriteSize / 2 + bounceOffset,
        spriteSize,
        0,
        Math.PI * 2
      );
      ctx.fill();

      const emoji = tamagotchi.happiness > 70 ? "üòä" : tamagotchi.happiness > 30 ? "üòê" : "üò¢";
      ctx.font = `${spriteSize * 1.5}px Arial`;
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillStyle = "black";
      ctx.fillText(emoji, tamagotchi.x + spriteSize / 2, tamagotchi.y + spriteSize / 2 + bounceOffset);
    }

    function drawEnvironment() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawTamagotchi();
    }

    function updateTamagotchi() {
      if (!tamagotchi.alive) return;

      tamagotchi.hunger -= 0.1;
      tamagotchi.happiness -= 0.05;
      tamagotchi.cleanliness -= 0.07;

      tamagotchi.hunger = Math.max(0, Math.min(100, tamagotchi.hunger));
      tamagotchi.happiness = Math.max(0, Math.min(100, tamagotchi.happiness));
      tamagotchi.cleanliness = Math.max(0, Math.min(100, tamagotchi.cleanliness));
    }

    function gameLoop() {
      drawEnvironment();
      updateTamagotchi();
    }

    setInterval(gameLoop, 100);
  </script>
</body>
</html>
